---
title: '[ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ì±Œë¦°ì§€] Next.jsë¡œ ë§ˆí¬ë‹¤ìš´ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° - front matter, gray-matter'
date: '2023-07-10'
---

# ê¸°ë³¸ ì„¸íŒ… & ê³¼ì œ

#### layout.tsx

```jsx
// src/layout.tsx
export default function RootLayout({ children }: { children: React.ReactNode }) {
	return (
		<html lang='ko'>
			<body className='dark:bg-slate-800'>
				<Navbar />
				<MyProfilePic />
				{children}
			</body>
		</html>
	);
}
```

#### page.tsx

```jsx
// src/page.tsx
export default function Home() {
	return (
		<main className='px-6 mx-auto'>
			<p className='mt-12 mb-12 text-3xl text-center dark:text-white'>
				ì•ˆë…•í•˜ì„¸ìš”. ğŸ‘‹&nbsp;
				<span className='whitespace-nowrap'>
					<span className='font-bold'>JaneChun</span>ì˜ ë¸”ë¡œê·¸ì…ë‹ˆë‹¤.
				</span>
			</p>
			<Posts />
		</main>
	);
}
```

![](https://velog.velcdn.com/images/wlwl99/post/d24c68b2-026d-45ce-8e10-589631803cab/image.png)

í° í‹€ì€ ì´ë ‡ê²Œ ë§Œë“¤ì—ˆê³ , ì—¬ê¸°ì„œ êµ¬í˜„í•´ì•¼ í•  ê³¼ì œëŠ”..

> 1. ë£¨íŠ¸ í´ë”ì˜ `__posts` í´ë” ì•ˆì— ë§ˆí¬ë‹¤ìš´ íŒŒì¼(`.md`)ì„ ì‘ì„±í•  ìˆ˜ ìˆì–´ì•¼ í•˜ë©°,
> 2. í•´ë‹¹ íŒŒì¼ì—ëŠ” ë§ˆí¬ë‹¤ìš´ ë³¸ë¬¸ê³¼ ê²Œì‹œê¸€ì— ëŒ€í•œ meta dataë¥¼ ë‹´ì„ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
> 3. ë¸”ë¡œê·¸ ê²Œì‹œê¸€ ëª©ë¡ í˜ì´ì§€ì™€, ê°œë³„ ê²Œì‹œê¸€ì„ ë Œë”ë§í•˜ëŠ” ìƒì„¸ í˜ì´ì§€ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.

ë¨¼ì €, ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì— **front matter ë¬¸ë²•**ì„ ì‚¬ìš©í•´ **ë©”íƒ€ ë°ì´í„°ë¥¼ ì‘ì„±**í•˜ê³  ì´ë¥¼ **ì¶”ì¶œí•´ ì‚¬ìš©í•˜ëŠ” ë²•**ì„ ì•Œì•„ë³´ì.

---

# ì•Œì•„ì•¼ í•  ê°œë…

## front matter

: ë¬¸ì„œë‚˜ íŒŒì¼ì˜ ë§¨ ì•ì— ìœ„ì¹˜í•˜ëŠ” ë©”íƒ€ ë°ì´í„°

- íŒŒì¼ì˜ ê°€ì¥ ì²« ë¶€ë¶„ì— ì‘ì„±í•´ì•¼ í•˜ë©°, ì‚¼ì¤‘ ì ì„ (`---`) ì‚¬ì´ì— ì‘ì„±í•˜ë©´ ëœë‹¤.
- ì£¼ë¡œ **YAML, TOML, JSON ë“±ì˜ í˜•ì‹ìœ¼ë¡œ ì‘ì„±**ë˜ë©°, `title`ì´ë‚˜ `description`, `author`, `date`, `category`, `tags`ë“± **ê²Œì‹œê¸€ì— ëŒ€í•œ ì¶”ê°€ ì •ë³´**ë¥¼ í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆë‹¤.
- ì¼ë°˜ì ìœ¼ë¡œ ë¸”ë¡œê·¸ í”Œë«í¼ì´ë‚˜ ì •ì  ì‚¬ì´íŠ¸ ìƒì„±ê¸°(Jekyll, Hugo ë“±)ì— ë§ì´ ì‚¬ìš©ëœë‹¤.

[front matter](https://jekyllrb.com/docs/front-matter/)

```yml
---
title: '[ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ì±Œë¦°ì§€] Reactì—ì„œ History API ì‚¬ìš©í•˜ì—¬ SPA Router ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°'
date: '2023-07-06'
---
```

ì´ë ‡ê²Œ ì‘ì„±í•œ ë©”íƒ€ë°ì´í„°ë¥¼ ë‚˜ì¤‘ì— ì¶”ì¶œí•˜ì—¬, ê²Œì‹œê¸€ì„ ë Œë”ë§í•˜ëŠ” ë°ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

## gray-matter

: íŒŒì¼ì—ì„œ **front matterë¥¼ ì¶”ì¶œí•˜ì—¬ JavaScript ê°ì²´ë¡œ ë°˜í™˜**í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
ì´ ëª¨ë“ˆì„ ì´ìš©í•´ front matterì˜ ì •ë³´ì— ì ‘ê·¼í•˜ê³ , ì‘ì„±ì, ì‘ì„±ì¼, ì œëª© ë“±ì˜ ì •ë³´ë¥¼ ì¶”ì¶œí•˜ì—¬ í™œìš©í•  ìˆ˜ ìˆë‹¤.
[gray-matter](https://github.com/jonschlinkert/gray-matter)

#### ì˜ˆì‹œ

ì•„ë˜ì™€ ê°™ì€ front matter ë¬¸ë²•ì˜ ë¬¸ìì—´ì„

```yml
---
title: Hello
slug: home
---
<h1>Hello world!</h1>
```

JavaScript ê°ì²´ë¡œ ë³€í™˜í•´ ë°˜í™˜í•´ì¤€ë‹¤.
ë©”íƒ€ ë°ì´í„°ëŠ” `data` ì†ì„±ì—, ë³¸ë¬¸ì˜ ë‚´ìš©ì€ `content` ì†ì„±ì— ë‹´ê¸´ë‹¤.

```jsx
{
  content: '<h1>Hello world!</h1>',
  data: {
    title: 'Hello',
    slug: 'home'
  }
}
```

---

# ì‹¤ì œ ì ìš©í•´ë³´ê¸°

ê·¸ëŸ¬ë©´ ì´ì œ ì‹¤ì œë¡œ ì‚¬ìš©í•´ë³´ì!
ìš°ì„  ë£¨íŠ¸ í´ë”ì— `__posts`ë¼ëŠ” í´ë”ë¥¼ ë§Œë“¤ê³ , ì•ˆì— ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì„ 2ê°œ ë§Œë“¤ì—ˆë‹¤. (`1.md`, `2.md`)
ìµœê·¼ì— velogì— ì“´ ê²Œì‹œê¸€ 2ê°œì˜ ë‚´ìš©ì„ ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ì—ˆê³ , front matterëŠ” ì•„ë˜ì™€ ê°™ì´ ê°„ë‹¨í•˜ê²Œ ì œëª©ê³¼ ë‚ ì§œë§Œ í¬í•¨í•˜ë„ë¡ ì‘ì„±í–ˆë‹¤.

#### 1.md

```jsx
// __posts/1.md
---
title: '[ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ì±Œë¦°ì§€] Reactì—ì„œ History API ì‚¬ìš©í•˜ì—¬ SPA Router ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°'
date: '2023-07-06'
---
// ë³¸ë¬¸ ìƒëµ
```

#### 2.md

```jsx
// __posts/2.md
---
title: '[ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ì±Œë¦°ì§€] useRouter í›…ìœ¼ë¡œ ë¶„ë¦¬í•˜ê¸°'
date: '2023-07-07'
---
// ë³¸ë¬¸ ìƒëµ
```

#### Posts.tsx

`Posts`ëŠ” ê²Œì‹œê¸€ ëª©ë¡ì„ ë³´ì—¬ì£¼ëŠ” ì»´í¬ë„ŒíŠ¸ì´ë‹¤.
`getSortedPostsData()` í•¨ìˆ˜ë¥¼ í†µí•´ ê²Œì‹œê¸€ ë°ì´í„°ë¥¼ ë°°ì—´ì„ ë°›ì•„ì˜¤ê³ , `ListItem` ì»´í¬ë„ŒíŠ¸ë¥¼ ì´ìš©í•´ í™”ë©´ì— ëª©ë¡ì„ í‘œì‹œí•œë‹¤.

```jsx
// src/components/Posts.tsx
import { getSortedPostsData } from '../../../lib/posts';
import ListItem from './ListItem';

export default function Posts() {
	const posts = getSortedPostsData();

	return (
		<section className='mt-6 mx-auto max-w-2xl'>
			<h2 className='text-4xl font-bold dark:text-white/90'>Blog</h2>
			<ul className='w-full'>
				{posts.map((post) => (
					<ListItem key={post.id} post={post} />
				))}
			</ul>
		</section>
	);
}
```

#### ListItem.tsx

```jsx
// src/components/ListItem.tsx
import Link from 'next/link';
import getFormattedDate from '../../../lib/getFormattedDate';

type Props = {
	post: BlogPost,
};

export default function ListItem({ post }: Props) {
	const { id, title, date } = post;
	const formattedDate = getFormattedDate(date);

	return (
		<li className='mt-4 text-2xl dark:text-white/90' key={id}>
			<Link href={`/posts/${id}`} className='underline hover:text-black/70 dark:hover:text-white'>
				{title}
			</Link>
			<br />
			<p className='text-sm mt-1'>{formattedDate}</p>
		</li>
	);
}
```

![](https://velog.velcdn.com/images/wlwl99/post/3c688141-96f5-4940-a1fc-5cca803d83c1/image.png)

#### `getSortedPostsData()`

`getSortedPostsData()` í•¨ìˆ˜ëŠ” **íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì„ ì½ì–´ì™€ì„œ ì •ë ¬ëœ ê²Œì‹œê¸€ ë°ì´í„°ë¥¼ ë°˜í™˜**í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.

íŒŒì¼ì„ ì½ì–´ì˜¤ê¸° ìœ„í•´ fs ëª¨ë“ˆì„ ì‚¬ìš©í•˜ê³ , ê²½ë¡œë¥¼ ë‹¤ë£¨ê¸° ìœ„í•´ path ëª¨ë“ˆì„ ì‚¬ìš©í•œë‹¤.

```jsx
import fs from 'fs'; // íŒŒì¼ì„ ì½ê³  ì“°ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” Node.jsì˜ íŒŒì¼ ì‹œìŠ¤í…œ ëª¨ë“ˆ
import path from 'path'; // íŒŒì¼ ê²½ë¡œë¥¼ ë‹¤ë£¨ëŠ” ëª¨ë“ˆ
import matter from 'gray-matter'; // ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì˜ front matterë¥¼ ì¶”ì¶œí•˜ëŠ” í•¨ìˆ˜
```

`postsDirectory`ë¼ëŠ” ë³€ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ **`__post` ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ì €ì¥**í•œë‹¤.
ë‚˜ì¤‘ì— ë‹¤ë¥¸ í•¨ìˆ˜ì—ì„œë„ ì‚¬ìš©í•  ê²ƒì´ê¸° ë•Œë¬¸ì— ì „ì—­ ë³€ìˆ˜ë¡œ ì„ ì–¸í•´ì¤¬ë‹¤.

```jsx
const postsDirectory = path.join('__posts');
```

### `fs.readdirSync()`

`fs.readdirSync()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ `postsDirectory` **ë””ë ‰í† ë¦¬ì˜ íŒŒì¼ ëª©ë¡**ì„ ê°€ì ¸ì˜¨ë‹¤.
`fs.readdirSync()` í•¨ìˆ˜ëŠ” ë””ë ‰í† ë¦¬ì˜ ë‚´ìš©ì„ ì½ì–´ì˜¤ëŠ” í•¨ìˆ˜ë¡œ, ë””ë ‰í† ë¦¬ ì•ˆì˜ íŒŒì¼ëª…ë“¤ì„ ë‹´ì€ ë°°ì—´ì„ ë°˜í™˜í•œë‹¤. [fs.readdirSync() - Node.js](https://nodejs.org/api/fs.html#fsreaddirsyncpath-options)

```jsx
export function getSortedPostsData() {
	const fileNames = fs.readdirSync(postsDirectory);
	console.log(fileNames); // ['1.md', '2.md']
}
```

### `fs.readFileSync()`

ì´ `fileNames` ë°°ì—´ì— `map()`ì„ ì´ìš©í•´ ê° íŒŒì¼ì˜ ì „ì²´ ê²½ë¡œë¥¼ ìƒì„±í•˜ê³ , `readFileSync()` í•¨ìˆ˜ë¡œ ê²½ë¡œë¥¼ ì „ë‹¬í•´ íŒŒì¼ ì•ˆì˜ ë‚´ìš©ì„ ì½ì–´ì˜¬ ê²ƒì´ë‹¤.

1. ë¨¼ì € íŒŒì¼ ì´ë¦„ì—ì„œ í™•ì¥ìëª…(`.md`)ì„ ì œê±°í•˜ê³ , ì´ë¥¼ `id`ë¡œ ì‚¬ìš©í•œë‹¤.
2. `path.join()` í•¨ìˆ˜ë¥¼ ì´ìš©í•´ í´ë”ì˜ ê²½ë¡œ(`postsDirectory`)ì™€ íŒŒì¼ëª…(`fileName`)ì„ ì¡°í•©í•´ **íŒŒì¼ì˜ ì „ì²´ ê²½ë¡œë¥¼ ìƒì„±**í•´ì¤€ë‹¤.
   e.g. `__posts` + `1.md` â¡ï¸ `__posts/1.md`
3. `fs.readFileSync()` í•¨ìˆ˜ë¥¼ ì´ìš©í•´ **íŒŒì¼ì˜ ë‚´ìš©ì„ ë™ê¸°ì ìœ¼ë¡œ ì½ì–´ì˜¤ê³ , ë¬¸ìì—´ í˜•íƒœë¡œ ì €ì¥**í•œë‹¤.

### `matter()`

4. `matter()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ `fileContents` ì•ˆì— ìˆëŠ” **frontmatterë¥¼ ì¶”ì¶œí•˜ì—¬ ì €ì¥**í•œë‹¤.
5. `blogPost` ê°ì²´ë¥¼ ìƒì„±í•´ `id`, `title`, `date` ì†ì„±ì„ `matterResult`ì— ë‹´ê¸´ ë°ì´í„°ë¡œ ì´ˆê¸°í™”í•´ì¤€ë‹¤.
6. ì´ë ‡ê²Œ ìƒì„±ëœ ê°ì²´ë¥¼ ë°˜í™˜í•˜ë©´, `allPostsData` ë³€ìˆ˜ì— ë¸”ë¡œê·¸ì˜ ì œëª©ê³¼ ë‚ ì§œë¥¼ ë‹´ì€ ê°ì²´ë“¤ì´ ë°°ì—´ ì•ˆì— ë‹´ê²¨ ì €ì¥ëœë‹¤.

```jsx
export function getSortedPostsData() {
	const fileNames = fs.readdirSync(postsDirectory);

	const allPostsData = fileNames.map((fileName) => {
		const id = fileName.replace(/\.md$/, ''); // 1ï¸âƒ£

		const fullPath = path.join(postsDirectory, fileName); // 2ï¸âƒ£
		const fileContents = fs.readFileSync(fullPath, 'utf8'); // 3ï¸âƒ£

		const matterResult = matter(fileContents); // 4ï¸âƒ£

		const blogPost: BlogPost = {
			// 5ï¸âƒ£
			id,
			title: matterResult.data.title, // ì´ ë°©ë²•ìœ¼ë¡œ ì¶”ì¶œí•œ front matterì˜ ë°ì´í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
			date: matterResult.data.date,
		};

		return blogPost; // 6ï¸âƒ£
	});
}
```

ë§ˆì§€ë§‰ìœ¼ë¡œ `allPostsData`ë¥¼ ë‚ ì§œ ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ(ìµœì‹ ìˆœ)í•˜ì—¬ ë°˜í™˜í•œë‹¤.

```jsx
return allPostsData.sort((a, b) => (a.date < b.date ? 1 : -1));
```

> #### ì „ì²´ ì½”ë“œ

```jsx
// lib/posts
import fs from 'fs';
import path from 'path';
import matter from 'gray-matter';
>
const postsDirectory = path.join('__posts');
>
export function getSortedPostsData() {
  const fileNames = fs.readdirSync(postsDirectory);
>
  const allPostsData = fileNames.map((fileName) => {
    const id = fileName.replace(/\.md$/, '');
>
    const fullPath = path.join(postsDirectory, fileName);
    const fileContents = fs.readFileSync(fullPath, 'utf8');
>
    const matterResult = matter(fileContents);
>
    const blogPost: BlogPost = {
      id,
      title: matterResult.data.title,
      date: matterResult.data.date,
    };
>
    return blogPost;
  });
>
  return allPostsData.sort((a, b) => (a.date < b.date ? 1 : -1)); // ë‚´ë¦¼ì°¨ìˆœ
}
```
